BEGIN TRANSACTION
SET QUOTED_IDENTIFIER ON
SET ARITHABORT ON
SET NUMERIC_ROUNDABORT OFF
SET CONCAT_NULL_YIELDS_NULL ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
COMMIT
BEGIN TRANSACTION
GO
CREATE TABLE dbo.Municipio
	(
	id int NOT NULL,
	nombre nvarchar(300) NOT NULL,
	estadoID int NOT NULL
	)  ON [PRIMARY]
GO
ALTER TABLE dbo.Municipio SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
//////////////////////////GASOLINA

BEGIN TRANSACTION
SET QUOTED_IDENTIFIER ON
SET ARITHABORT ON
SET NUMERIC_ROUNDABORT OFF
SET CONCAT_NULL_YIELDS_NULL ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
COMMIT
BEGIN TRANSACTION
GO
CREATE TABLE dbo.Estado
	(
	id int NOT NULL IDENTITY (1, 1),
	nombre nvarchar(50) NOT NULL,
	active smallint NOT NULL
	)  ON [PRIMARY]
GO
ALTER TABLE dbo.Estado SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
///////////////////GASOLINA
BEGIN TRANSACTION
SET QUOTED_IDENTIFIER ON
SET ARITHABORT ON
SET NUMERIC_ROUNDABORT OFF
SET CONCAT_NULL_YIELDS_NULL ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
COMMIT
BEGIN TRANSACTION
GO
CREATE TABLE dbo.precio
	(
	id int NOT NULL IDENTITY (1, 1),
	valor float(53) NOT NULL,
	idGasolina int NOT NULL,
	fechaAplicacion date ,
	idGasolinera int NOT NULL
	)  ON [PRIMARY]
GO
ALTER TABLE dbo.precio SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
////////////////////////GASOLINA
BEGIN TRANSACTION
SET QUOTED_IDENTIFIER ON
SET ARITHABORT ON
SET NUMERIC_ROUNDABORT OFF
SET CONCAT_NULL_YIELDS_NULL ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
COMMIT
BEGIN TRANSACTION
GO
CREATE TABLE dbo.gasolina
	(
	id int NOT NULL IDENTITY (1, 1),
	producto nvarchar(100) NOT NULL,
	marca nvarchar(100) NOT NULL,
	subproducto nvarchar(100) NOT NULL
	)  ON [PRIMARY]
GO
ALTER TABLE dbo.gasolina SET (LOCK_ESCALATION = TABLE)
GO
COMMIT

///////////////GASOLINERA
BEGIN TRANSACTION
SET QUOTED_IDENTIFIER ON
SET ARITHABORT ON
SET NUMERIC_ROUNDABORT OFF
SET CONCAT_NULL_YIELDS_NULL ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
COMMIT
BEGIN TRANSACTION
GO
CREATE TABLE dbo.Tmp_gasolinera
	(
	id int NOT NULL IDENTITY (1, 1),
	nombre nvarchar(200) NOT NULL,
	direccion nvarchar(500) NOT NULL,
	numero nvarchar(50) NOT NULL,
	idmunicipio int NOT NULL,
	idestado int NOT NULL
	)  ON [PRIMARY]
GO
ALTER TABLE dbo.Tmp_gasolinera SET (LOCK_ESCALATION = TABLE)
GO
SET IDENTITY_INSERT dbo.Tmp_gasolinera ON
GO
IF EXISTS(SELECT * FROM dbo.gasolinera)
	 EXEC('INSERT INTO dbo.Tmp_gasolinera (id, nombre, direccion, numero, idmunicipio)
		SELECT id, nombre, direccion, numero, idmunicipio FROM dbo.gasolinera WITH (HOLDLOCK TABLOCKX)')
GO
SET IDENTITY_INSERT dbo.Tmp_gasolinera OFF
GO
DROP TABLE dbo.gasolinera
GO
EXECUTE sp_rename N'dbo.Tmp_gasolinera', N'gasolinera', 'OBJECT' 
GO
COMMIT